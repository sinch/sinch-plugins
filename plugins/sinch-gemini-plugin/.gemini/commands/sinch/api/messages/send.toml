description = "Send a text message via Sinch Conversation API (SMS/RCS)"

prompt = """
Send a text message to a recipient using the Sinch Conversation API.

Arguments: {{args}}

Instructions:
1. Parse and validate arguments:
   - --to or -t: Recipient phone number in E.164 format (e.g., +14155551234) - REQUIRED
   - --message or -m: Text content - REQUIRED
   - --channel or -c: Channel (SMS or RCS) - optional, defaults to SMS
   
   Example: --to=+14155551234 --message="Hello from Sinch" --channel=SMS

2. Validate inputs:
   - Ensure --to is provided and in E.164 format (starts with +, followed by digits)
   - Ensure --message is provided and non-empty
   - If --channel not provided, default to "SMS"
   - Normalize channel to uppercase (sms → SMS, rcs → RCS)
   - Validate channel is either "SMS" or "RCS" (reject other channels)

3. Retrieve Sinch configuration from environment variables:
   - CONVERSATION_PROJECT_ID
   - CONVERSATION_REGION
   - CONVERSATION_APP_ID
   - CONVERSATION_KEY_ID
   - CONVERSATION_KEY_SECRET

4. Send the message using the Sinch Conversation API:
   - Endpoint: POST https://{region}.conversation.api.sinch.com/v1/projects/{projectId}/messages:send
   - Use OAuth2 authentication with key ID and secret
   - Request body:
     {
       "app_id": "<appId>",
       "recipient": {
         "identified_by": {
           "channel_identities": [{
             "channel": "<channel>",
             "identity": "<to_number>"
           }]
         }
       },
       "message": {
         "text_message": {
           "text": "<message_content>"
         }
       }
     }

5. Report results:
   - Success: Display message ID and delivery status
   - Show: "✅ Message sent successfully!"
   - Display details: Message ID, Recipient, Channel, Status

6. Handle errors:
   - If environment variables missing: "Sinch API is not configured. Please set: CONVERSATION_PROJECT_ID, CONVERSATION_KEY_ID, CONVERSATION_KEY_SECRET, CONVERSATION_REGION, CONVERSATION_APP_ID"
   - If validation fails, provide clear error messages
   - If API call fails, display error with status code and description
   - If channel not configured: "Channel not configured in your Conversation app. Please configure the channel in Sinch Dashboard."

Notes:
- Phone numbers must be in E.164 format (+country_code + number)
- Ensure your Conversation app has the appropriate channel configured
- SMS is the default channel if not specified
- RCS requires RCS capability to be enabled

Example usage:
/sinch:messages:send --to=+14155551234 --message="Hello"
/sinch:messages:send -t +14155551234 -m "Hello from Sinch" --channel=RCS
/sinch:messages:send --to=+14155551234 --message="Test message" -c SMS

API Reference:
https://developers.sinch.com/docs/conversation/api-reference/conversation/tag/Messages/#tag/Messages/operation/Messages_SendMessage
"""
